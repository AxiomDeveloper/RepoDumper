<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0" />
  <title>RepoDumper Pro</title>
  <meta name="theme-color" content="#0b0f19" />
  <link rel="manifest" href="./manifest.json" />
  <link rel="stylesheet" href="./styles.css" />
</head>
<body data-view="config">
  <header class="topbar">
    <div class="brand">
      <div class="logo">RD</div>
      <div class="brand-text">
        <div class="title" id="displayRepoName">Repo Dumper</div>
        <div class="subtitle" id="displayBranchName">Ready to dump</div>
      </div>
    </div>
    <button id="btnTheme" class="btn-icon" aria-label="Toggle theme">ğŸŒ—</button>
  </header>

  <nav class="bottom-nav">
    <button class="nav-item active" data-target="config">
      <i>âš™ï¸</i><span>Config</span>
    </button>
    <button class="nav-item" data-target="explorer">
      <i>ğŸ“‚</i><span>Explorer</span>
    </button>
    <button class="nav-item" data-target="output">
      <i>ğŸ“„</i><span>Output</span>
    </button>
  </nav>

  <main class="viewport">
    <section id="view-config" class="view-section">
      <div class="card">
        <h2>Connection Settings</h2>
        <div class="grid">
          <div class="field">
            <input id="token" type="password" placeholder="GitHub Token (PAT)" />
          </div>
          <div class="field">
            <input id="repoUrl" type="url" placeholder="owner/repo or URL" />
          </div>
          <div class="row">
            <select id="branch"><option value="">Default Branch</option></select>
            <input id="maxKb" type="number" value="512" placeholder="Max KB" />
          </div>
          <input id="exclude" type="text" placeholder="Exclude: node_modules, dist..." />
        </div>
        <button id="btnLoad" class="btn primary full-width">Connect & Load Tree</button>
        
        <div class="status-box">
          <div class="status-header">
            <span class="pill" id="statusPill">Idle</span>
            <span id="statusText">Ready to start</span>
          </div>
          <div class="progress"><div class="bar" id="progressBar"></div></div>
        </div>
      </div>
    </section>

    <section id="view-explorer" class="view-section">
      <div class="explorer-layout">
        <div class="pane-meta" id="repoMeta"></div>
        <div class="search-bar">
          <input id="treeSearch" type="text" placeholder="Search files..." />
        </div>
        <div id="tree" class="tree-container"></div>
        
        <div class="file-preview-overlay" id="filePreview">
          <div class="preview-header">
            <span id="activePath">Select a file</span>
            <button id="btnCopyFile" class="btn-icon">ğŸ“‹</button>
            <button id="btnClosePreview" class="btn-icon">âœ•</button>
          </div>
          <pre class="code"><code id="fileContent"></code></pre>
        </div>
      </div>
    </section>

    <section id="view-output" class="view-section">
      <div class="card full-height">
        <div class="pane-head">
          <h2>AI-Ready Dump</h2>
          <div class="actions-mini">
            <button id="btnCopyDump" class="btn sm" disabled>Copy</button>
            <button id="btnDownloadDump" class="btn sm" disabled>Save</button>
          </div>
        </div>
        <textarea id="dumpOut" class="dump-area" readonly placeholder="Your dump will appear here..."></textarea>
      </div>
    </section>
  </main>

  <button id="btnDump" class="fab" title="Generate Dump" disabled>
    <span>+</span>
  </button>

  <script src="./app.js"></script>
</body>
</html>

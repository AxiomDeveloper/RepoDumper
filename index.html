<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>RepoDumper Pro</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body data-view="config">
    <header class="glass-header">
        <div class="header-inner">
            <div class="logo-group">
                <span class="logo-icon">‚ö°</span>
                <div>
                    <h1 id="displayRepoName">RepoDumper</h1>
                    <p id="displayBranchName">Not Connected</p>
                </div>
            </div>
            <button id="btnTheme" class="icon-btn">üåó</button>
        </div>
    </header>

    <main class="app-container">
        <section id="view-config" class="view">
            <div class="glass-card">
                <label class="native-label">Authentication</label>
                <input id="token" type="password" placeholder="GitHub Token (Optional)" class="native-input">
                
                <label class="native-label">Target Repository</label>
                <input id="repoUrl" type="url" placeholder="owner/repo" class="native-input">
                
                <div class="input-row">
                    <div class="input-half">
                        <label class="native-label">Branch</label>
                        <select id="branch" class="native-select">
                            <option value="">Default</option>
                        </select>
                    </div>
                    <div class="input-half">
                        <label class="native-label">Limit (KB)</label>
                        <input id="maxKb" type="number" value="512" class="native-input">
                    </div>
                </div>

                <label class="native-label">Exclusions</label>
                <input id="exclude" type="text" value="node_modules, .git, dist, .png, .jpg" class="native-input">

                <button id="btnLoad" class="btn-primary">Fetch Repository</button>
                
                <div class="status-glass">
                    <div class="status-text-row">
                        <span id="statusPill" class="pill">Idle</span>
                        <span id="statusText">Awaiting input...</span>
                    </div>
                    <div class="progress-track"><div id="progressBar" class="progress-fill"></div></div>
                </div>
            </div>
        </section>

        <section id="view-explorer" class="view">
            <div class="explorer-tools">
                <input id="treeSearch" type="text" placeholder="Search files..." class="glass-search">
                <button id="btnCopyTree" class="btn-sm">Copy Tree</button>
            </div>
            <div id="tree" class="native-tree"></div>
        </section>

        <section id="view-output" class="view">
            <div class="glass-card dump-compiler">
                <h3>Compiler Settings</h3>
                <p class="sub">Toggle items to include in the AI payload</p>
                
                <div class="toggle-list">
                    <label class="native-toggle">
                        <span>Include Repo Metadata</span>
                        <input type="checkbox" id="optMeta" checked>
                        <span class="slider"></span>
                    </label>
                    <label class="native-toggle">
                        <span>Include File Tree</span>
                        <input type="checkbox" id="optTree" checked>
                        <span class="slider"></span>
                    </label>
                    <label class="native-toggle">
                        <span>Include File Contents</span>
                        <input type="checkbox" id="optFiles" checked>
                        <span class="slider"></span>
                    </label>
                </div>

                <button id="btnDump" class="btn-primary">Compile All for AI</button>
            </div>

            <div class="output-wrapper glass">
                <div class="output-header">
                    <span>Generated Payload</span>
                    <button id="btnCopyDump" class="btn-sm btn-accent">Copy All Content</button>
                </div>
                <textarea id="dumpOut" readonly placeholder="Output will appear here..."></textarea>
            </div>
        </section>
    </main>

    <nav class="glass-nav">
        <button class="nav-btn active" data-target="config"><i>‚öôÔ∏è</i><span>Setup</span></button>
        <button class="nav-btn" data-target="explorer"><i>üìÇ</i><span>Files</span></button>
        <button class="nav-btn" data-target="output"><i>üìÑ</i><span>Dump</span></button>
    </nav>

    <div id="filePreview" class="drawer glass">
        <div class="drawer-header">
            <button id="btnClosePreview" class="icon-btn">‚úï</button>
            <span id="activePath">Preview</span>
            <button id="btnCopyFile" class="icon-btn">üìã</button>
        </div>
        <pre><code id="fileContent"></code></pre>
    </div>

    <div id="toast" class="toast">Copied!</div>

    <script src="app.js"></script>
</body>
</html>

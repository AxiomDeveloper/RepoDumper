<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0, viewport-fit=cover" />
  <title>RepoDumper Pro</title>
  <meta name="theme-color" content="#0b0f19" />
  <link rel="manifest" href="./manifest.json" />
  <link rel="stylesheet" href="./styles.css" />
</head>
<body data-view="config">
  <header class="topbar">
    <div class="brand">
      <div class="logo">RD</div>
      <div class="brand-text">
        <div class="title" id="displayRepoName">Repo Dumper</div>
        <div class="subtitle" id="displayBranchName">Ready to connect</div>
      </div>
    </div>
    <button id="btnTheme" class="btn-icon">ğŸŒ—</button>
  </header>

  <nav class="bottom-nav">
    <button class="nav-item active" data-target="config"><i>âš™ï¸</i><span>Config</span></button>
    <button class="nav-item" data-target="explorer"><i>ğŸ“‚</i><span>Explorer</span></button>
    <button class="nav-item" data-target="output"><i>ğŸ“„</i><span>Output</span></button>
  </nav>

  <main class="viewport">
    <section id="view-config" class="view-section">
      <div class="card">
        <h3>Repository Access</h3>
        <div class="grid">
          <input id="token" type="password" placeholder="GitHub Token (PAT)" />
          <input id="repoUrl" type="url" placeholder="owner/repo" />
          <div class="row">
            <select id="branch"><option value="">Default Branch</option></select>
            <input id="maxKb" type="number" value="512" placeholder="KB Limit" />
          </div>
          <input id="exclude" type="text" placeholder="Exclude: node_modules, dist, .git" />
        </div>
        <button id="btnLoad" class="btn primary full-width">Connect & Load</button>
        <div class="status-box">
          <div class="status-header">
            <span class="pill" id="statusPill">Idle</span>
            <span id="statusText">Awaiting input...</span>
          </div>
          <div class="progress"><div class="bar" id="progressBar"></div></div>
        </div>
      </div>
    </section>

    <section id="view-explorer" class="view-section">
      <div class="explorer-container">
        <input id="treeSearch" class="search-input" type="text" placeholder="Search files..." />
        <div id="tree" class="tree-view"></div>
      </div>
      <div class="file-overlay" id="filePreview">
        <div class="preview-header">
          <button id="btnClosePreview" class="btn-icon">âœ•</button>
          <span id="activePath">File Preview</span>
          <button id="btnCopyFile" class="btn-icon">ğŸ“‹</button>
        </div>
        <pre class="code-block"><code id="fileContent"></code></pre>
      </div>
    </section>

    <section id="view-output" class="view-section">
      <div class="output-card">
        <div class="output-header">
          <h3>Full AI Dump</h3>
          <button id="btnCopyDump" class="btn primary sm" disabled>Copy All Content</button>
        </div>
        <textarea id="dumpOut" class="dump-area" readonly placeholder="Output will appear here..."></textarea>
      </div>
    </section>
  </main>

  <button id="btnDump" class="fab" disabled><span class="fab-icon">âš¡</span></button>

  <div id="toast" class="toast">Copied to clipboard!</div>

  <script src="./app.js"></script>
</body>
</html>

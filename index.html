<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0, viewport-fit=cover" />
  <title>RepoDumper Pro</title>
  <meta name="theme-color" content="#0b0f19" />
  <link rel="manifest" href="./manifest.json" />
  <link rel="stylesheet" href="./styles.css" />
</head>
<body data-view="config">
  <header class="topbar">
    <div class="brand">
      <div class="logo">RD</div>
      <div class="brand-text">
        <div class="title" id="displayRepoName">Repo Dumper</div>
        <div class="subtitle" id="displayBranchName">Ready to connect</div>
      </div>
    </div>
    <button id="btnTheme" class="btn-icon" aria-label="Toggle theme">üåó</button>
  </header>

  <nav class="bottom-nav">
    <button class="nav-item active" data-target="config"><i>‚öôÔ∏è</i><span>Config</span></button>
    <button class="nav-item" data-target="explorer"><i>üìÇ</i><span>Explorer</span></button>
    <button class="nav-item" data-target="output"><i>üìÑ</i><span>Output</span></button>
  </nav>

  <main class="viewport">
    <section id="view-config" class="view-section">
      <div class="card">
        <h3>Repository Access</h3>
        <div class="grid">
          <div class="field">
            <span>GitHub Token (Optional for Public)</span>
            <input id="token" type="password" placeholder="ghp_xxxxxxxxxxxx" autocomplete="off" />
          </div>
          <div class="field">
            <span>Repo URL or path</span>
            <input id="repoUrl" type="url" placeholder="owner/repo" />
          </div>
          <div class="row">
            <div class="field">
              <span>Branch</span>
              <select id="branch"><option value="">Default</option></select>
            </div>
            <div class="field">
              <span>Limit (KB)</span>
              <input id="maxKb" type="number" value="512" />
            </div>
          </div>
          <div class="field">
            <span>Exclude (csv)</span>
            <input id="exclude" type="text" placeholder="node_modules, .git, dist" />
          </div>
        </div>
        <button id="btnLoad" class="btn primary full-width">Connect & Fetch Tree</button>
        
        <div class="status-box">
          <div class="status-header">
            <span class="pill" id="statusPill">Idle</span>
            <span id="statusText" class="muted">Awaiting input...</span>
          </div>
          <div class="progress"><div class="bar" id="progressBar"></div></div>
        </div>
      </div>
    </section>

    <section id="view-explorer" class="view-section">
      <div class="explorer-container">
        <div id="repoMeta" class="meta-strip"></div>
        <input id="treeSearch" class="search-input" type="text" placeholder="Search files in tree..." />
        <div id="tree" class="tree-view"></div>
      </div>

      <div class="file-overlay" id="filePreview">
        <div class="preview-header">
          <button id="btnClosePreview" class="btn-icon">‚úï</button>
          <span id="activePath">Select a file</span>
          <button id="btnCopyFile" class="btn-icon" disabled>üìã</button>
        </div>
        <pre class="code-block"><code id="fileContent"></code></pre>
      </div>
    </section>

    <section id="view-output" class="view-section">
      <div class="output-header">
        <h3>AI-Ready Content</h3>
        <div class="mini-actions">
          <button id="btnCopyDump" class="btn sm" disabled>Copy All</button>
          <button id="btnDownloadDump" class="btn sm" disabled>Save .txt</button>
        </div>
      </div>
      <textarea id="dumpOut" class="dump-area" readonly placeholder="The full repo dump will generate here..."></textarea>
    </section>
  </main>

  <button id="btnDump" class="fab" title="Generate Dump" disabled>
    <span class="fab-icon">‚ö°</span>
  </button>

  <script src="./app.js"></script>
</body>
</html>
